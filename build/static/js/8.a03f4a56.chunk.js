(this["webpackJsonpbsc-proj"]=this["webpackJsonpbsc-proj"]||[]).push([[8],{47:function(t,e,n){"use strict";var c=n(20),a=n(9),r=n(0),o=n.n(r),i=n(13);function l(){var t=Object(c.a)(["\n\twidth: 50%;\n"]);return l=function(){return t},t}var s=Object(a.a)(l()),u=function(){return Object(a.b)("input",{css:s,className:"form-control",type:"text",placeholder:"What are you looking for.."})},b=n(7),p=n(12),f=n(21),m=n(52),O=n(54),j=n(53);function d(){var t=Object(c.a)(["\n\t\t> a {\n\t\t\tmargin-left: 30px;\n\t\t}\n\t"]);return d=function(){return t},t}var v=function(){var t=Object(b.g)().pathname,e=Object(r.useContext)(p.a).currentUser;console.log(t);var n=Object(a.a)(d());return Object(a.b)(o.a.Fragment,null,Object(a.b)("div",{css:n},function(){switch(t){case"/account":return Object(a.b)(o.a.Fragment,null,Object(a.b)(i.c,{activeClassName:"active",to:"/adverts"},Object(a.b)(j.a,null)," Adverts"),Object(a.b)(i.c,{activeClassName:"active",to:"/account/settings"},Object(a.b)(j.b,null)," Settings"));case"/account/settings":return Object(a.b)(o.a.Fragment,null,Object(a.b)(i.c,{activeClassName:"active",to:"/adverts"},Object(a.b)(j.a,null)," Adverts"),Object(a.b)(i.c,{activeClassName:"active",to:"/account"},Object(a.b)(m.e,null)," My account"));case"/":return Object(a.b)(o.a.Fragment,null,!e&&Object(a.b)(o.a.Fragment,null,Object(a.b)(i.c,{activeClassName:"active",to:"/signup"},Object(a.b)(m.f,null)," Sign up"),Object(a.b)(i.c,{activeClassName:"active",to:"/login"},Object(a.b)(m.a,null)," Log in")),e&&Object(a.b)(o.a.Fragment,null,Object(a.b)(i.c,{activeClassName:"active",to:"/post",className:"btn btn-primary"},Object(a.b)(O.a,null)," Post advert"),Object(a.b)(i.c,{activeClassName:"active",to:"/account"},Object(a.b)(m.e,null)," My account")));case"/signup":case"/login":return;case"/adverts":return Object(a.b)(o.a.Fragment,null,Object(a.b)(i.c,{activeClassName:"active",to:"/post",className:"btn btn-primary"},Object(a.b)(O.a,null)," Post advert"),Object(a.b)(i.c,{activeClassName:"active",to:"/account"},Object(a.b)(j.c,null)," My account"));case"/advert":return Object(a.b)(o.a.Fragment,null,Object(a.b)(i.c,{activeClassName:"active",to:"/post",className:"btn btn-primary"},Object(a.b)(O.a,null)," Post advert"),Object(a.b)(i.c,{activeClassName:"active",to:"/account"},Object(a.b)(m.e,null)," My account"));default:return}}(),e&&Object(a.b)(i.c,{activeClassName:"active",to:"/account",title:"Sign out",onClick:function(){return f.a.auth().signOut()}},Object(a.b)(m.b,null)," Sign out")))};function g(){var t=Object(c.a)(["\n\tfont-weight: 900;\n"]);return g=function(){return t},t}function h(){var t=Object(c.a)(['\n\tbackground: #372a2a;\n\tdisplay: inline-block;\n\theight: 44px;\n\ttext-align: center;\n\tletter-spacing: -1px;\n\tposition: relative;\n\tcolor: white;\n\twidth: 60px;\n\t&:before {\n\t\tborder-bottom: 8px solid #372a2a;\n\t\tborder-left: 30px solid transparent;\n\t\tborder-right: 30px solid transparent;\n\t\tcontent: "";\n\t\theight: 0;\n\t\tleft: 0;\n\t\tposition: absolute;\n\t\ttop: -8px;\n\t\twidth: 0;\n\t}\n\ta,\n\ta:hover {\n\t\tcolor: white;\n\t\ttext-decoration: none;\n\t}\n']);return h=function(){return t},t}function y(){var t=Object(c.a)(["\n\tflex: 1 1 auto;\n"]);return y=function(){return t},t}function N(){var t=Object(c.a)(["\n\tmargin-top: 5px;\n\t// border-bottom: 1px solid #ddd;\n\t// margin-bottom: 15px;\n\talign-items: center;\n\t> div {\n\t\tmargin: 10px;\n\t}\n"]);return N=function(){return t},t}var x=Object(a.a)(N()),w=Object(a.a)(y()),C=Object(a.a)(h()),k=Object(a.a)(g());e.a=function(){return Object(a.b)(o.a.Fragment,null,Object(a.b)("div",{css:x,className:"clearfix d-flex"},Object(a.b)("div",null,Object(a.b)("div",{css:C},Object(a.b)(i.b,{to:"/"},Object(a.b)("h1",{css:k},"5th")))),Object(a.b)("div",{css:w},Object(a.b)(u,null)),Object(a.b)(v,null)))}},48:function(t,e,n){"use strict";var c=n(20),a=n(0),r=n.n(a),o=n(9),i=n(47);function l(){var t=Object(c.a)(["\n\t\tbackground: aliceblue;\n\t\tmargin-bottom: 15px;\n\t"]);return l=function(){return t},t}function s(){var t=Object(c.a)(["\n\t\talign-items: center;\n\t\tmin-height: 24em;\n\t\tjustify-content: center;\n\t"]);return s=function(){return t},t}e.a=function(t){var e=Object(o.a)(s()),n=Object(o.a)(l());return Object(o.b)(r.a.Fragment,null,Object(o.b)("div",{css:n},Object(o.b)("div",{className:"container"},Object(o.b)(i.a,null))),Object(o.b)("div",{className:"container",css:e},t.children))}},50:function(t,e,n){"use strict";function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return c}))},55:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var c=n(50);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,c)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},70:function(t,e,n){"use strict";n.r(e);var c=n(20),a=n(49),r=n.n(a),o=n(51),i=n(50),l=n(55),s=n(15),u=n(9),b=n(0),p=n(14),f=(n(57),n(29),n(48));function m(){var t=Object(c.a)(['\n\t\toverflow: hidden;\n\t\tposition: relative;\n\t\tbackground: white;\n\t\tborder-radius: 2px;\n\t\tborder: 1px solid #333;\n\t\tfloat: left;\n\t\tpadding: 0.375rem 0.75rem;\n\t\tcursor: pointer;\n\t\ttransition: all 0.2s;\n\n\t\t:hover {\n\t\t\tbackground: #a52a2a;\n\t\t\tcolor: white;\n\t\t\tborder: 1px solid brown;\n\t\t}\n\n\t\t[type="file"] {\n\t\t\tcursor: inherit;\n\t\t\tdisplay: block;\n\t\t\tfont-size: 999px;\n\t\t\tfilter: alpha(opacity=0);\n\t\t\tmin-height: 100%;\n\t\t\tmin-width: 100%;\n\t\t\topacity: 0;\n\t\t\tposition: absolute;\n\t\t\tright: 0;\n\t\t\ttext-align: right;\n\t\t\ttop: 0;\n\t\t}\n\t']);return m=function(){return t},t}function O(){var t=Object(c.a)(["\n\t\tbackground: white;\n\t\tborder-radius: 2px;\n\t\tpadding: 10px 0;\n\t"]);return O=function(){return t},t}function j(){var t=Object(c.a)(["\n\t\tmargin-bottom: 10px;\n\t"]);return j=function(){return t},t}e.default=function(t){var e,n=p.firestore().collection("adverts"),c=Object(b.useState)([]),a=Object(s.a)(c,2),d=a[0],v=a[1],g=Object(b.useState)([]),h=Object(s.a)(g,2),y=h[0],N=h[1],x=Object(b.useState)(p.auth().currentUser.email),w=Object(s.a)(x,2),C=w[0],k=(w[1],Object(b.useReducer)((function(t,e){return Object(l.a)({},t,{},e)}),{title:"",email:"",phone:"",city:"",postcode:"",category:"",price:"",description:"",file:[],post:""})),P=Object(s.a)(k,2),S=P[0],F=P[1],D=function(t,e){console.log(e),F(Object(i.a)({},t,e))};function E(){return(E=Object(o.a)(r.a.mark((function t(){var e,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.firestore().collection("category").get();case 2:e=t.sent,n=e.docs.map((function(t){var e=t.data();return Object(l.a)({docId:t.id},e)})),N(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.firestore().collection("adverts").doc(t.match.params.id).get().then(function(){var t=Object(o.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.exists?(n=e.data(),D("title",n.title),D("email",n.email),D("phone",n.phone),D("city",n.city),D("postcode",n.postcode),D("category",n.category),D("price",n.price),D("description",n.description),D("file",n.file),D("post",n.post)):console.log("No such document!");case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error("Error adding document: ",t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){S.file.length>0&&0==e.length&&(e=S.file);var c={file:e,user:C},a=Object(l.a)({},S,{},c);t.match.params.id?p.firestore().collection("adverts").doc(t.match.params.id).update(a).then((function(e){t.history.push("/success/"+t.match.params.id+"/edited")})).catch((function(t){console.error("Error adding document: ",t)})):n.add(a).then((function(e){console.log(e),t.history.push("/success/"+e.id+"/added")})).catch((function(t){console.error("Error adding document: ",t)}))}Object(b.useEffect)((function(){t.match.params.id&&function(){M.apply(this,arguments)}(t.match.params.id),function(){E.apply(this,arguments)}()}),[]);var A=Object(b.useCallback)(function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),d.length>0?Promise.all(d.map((function(t){return e=t,new Promise((function(t,n){var c=p.storage().ref().child("images/"+e.name).put(e);c.on("state_changed",(function(){}),(function(t){n(t)}),(function(){c.snapshot.ref.getDownloadURL().then((function(e){t({url:e})})).catch((function(t){n(t)}))}))}));var e}))).then(function(){var t=Object(o.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):U([]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),J=Object(u.a)(j()),L=Object(u.a)(O()),R=Object(u.a)(m());return Object(u.b)(f.a,null,Object(u.b)("form",{onSubmit:A},Object(u.b)("div",{className:"form-group",css:J},Object(u.b)("label",null,"Title"),Object(u.b)("input",{name:"title",className:"form-control",type:"text",value:S.title,onChange:function(t){D("title",t.target.value)}})),Object(u.b)("div",{className:"form-row",css:L},Object(u.b)("div",{className:"form-group col-md-6",css:J},Object(u.b)("label",null,"Email"),Object(u.b)("input",{name:"email",className:"form-control",type:"text",value:S.email,onChange:function(t){D("email",t.target.value)}})),Object(u.b)("div",{className:"form-group col-md-6",css:J},Object(u.b)("label",null,"Phone"),Object(u.b)("input",{name:"phone",className:"form-control",type:"text",value:S.phone,onChange:function(t){D("phone",t.target.value)}}))),Object(u.b)("div",{className:"form-row",css:L},Object(u.b)("div",{className:"form-group col-md-6",css:J},Object(u.b)("label",null,"City"),Object(u.b)("input",{name:"city",className:"form-control",type:"text",value:S.city,onChange:function(t){D("city",t.target.value)}})),Object(u.b)("div",{className:"form-group col-md-6",css:J},Object(u.b)("label",null,"Post Code"),Object(u.b)("input",{name:"postcode",className:"form-control",type:"text",value:S.postcode,onChange:function(t){D("postcode",t.target.value)}}))),Object(u.b)("div",{className:"form-row",css:L},Object(u.b)("div",{className:"form-group col-md-4",css:J},Object(u.b)("label",null,"Price"),Object(u.b)("input",{name:"price",className:"form-control",type:"price",placeholder:"Price",value:S.price,onChange:function(t){D("price",t.target.value)}})),Object(u.b)("div",{className:"form-group col-md-4",css:J},Object(u.b)("label",null,"Post or collection"),Object(u.b)("select",{className:"form-control",value:S.post,onChange:function(t){D("post",t.target.value)}},Object(u.b)("option",{value:""},"Select"),Object(u.b)("option",{value:"1"},"Will also post"),Object(u.b)("option",{value:"2"},"Collection only"))),Object(u.b)("div",{className:"form-group col-md-4",css:J},Object(u.b)("label",null,"Category"),Object(u.b)("select",{className:"form-control",value:S.category,onChange:function(t){D("category",t.target.value)}},Object(u.b)("option",{value:""},"Select"),y.length>0?y.map((function(t,e){return Object(u.b)("option",{value:t.title,key:e},t.title)})):Object(u.b)("option",{value:""},"No category Found")))),Object(u.b)("div",{className:"form-group",css:J},Object(u.b)("label",null,"Description"),Object(u.b)("textarea",{className:"form-control",cols:"30",rows:"3",name:"description",placeholder:"Description",value:S.description,onChange:function(t){D("description",t.target.value)}})),Object(u.b)("div",{className:"form-group",css:J},S.file.length>0&&S.file.map((function(t,e){return Object(u.b)("div",{key:e},Object(u.b)("img",{src:t.url,width:"100"}))}))),Object(u.b)("label",{css:R},"Upload images",Object(u.b)("input",(e={type:"file"},Object(i.a)(e,"type","file"),Object(i.a)(e,"className","btn btn-outline-primary"),Object(i.a)(e,"onChange",(function(t){!function(t){for(var e=[],n=0;n<t.target.files.length;n++){var c=t.target.files[n];e.push(c)}v(e)}(t)})),Object(i.a)(e,"multiple",!0),e))),Object(u.b)("div",{className:"clearfix"},Object(u.b)("button",{type:"submit",className:"btn btn-primary float-right w-25"},"Submit"))))}}}]);
//# sourceMappingURL=8.a03f4a56.chunk.js.map